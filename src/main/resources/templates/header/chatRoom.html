<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat</title>
</head>
<body>
채팅방임
<script>
  let stompClient = null;

  function connect() {
    const socket = new SockJS('/chat-websocket');
    stompClient = Stomp.over(socket);
    stompClient.connect({}, function(frame) {
      // 구독할 대상 지정, 예를 들어 '/topic/chatroom/1' 등
      stompClient.subscribe('/topic/chatroom/' + roomId, function(message) {
        // 메시지를 받았을 때의 처리 로직
        showMessage(JSON.parse(message.body).content);
      });
    });
  }

  function disconnect() {
    if (stompClient !== null) {
      stompClient.disconnect();
    }
    console.log("Disconnected");
  }

  // 채팅방 페이지가 로드될 때 WebSocket 연결을 시작
  connect();

  // 채팅방 페이지를 벗어날 때 WebSocket 연결 해제
  window.onbeforeunload = function(e) {
    disconnect();
  };

</script>
</body>
</html>