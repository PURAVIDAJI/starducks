<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>

  <title>Chat</title>
  <script src="https://cdn.jsdelivr.net/npm/sockjs-client/dist/sockjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stomp-websocket/lib/stomp.min.js"></script>
  <link rel="stylesheet" type="text/css" th:href="@{/css/header/chat.css}" />

</head>
<body>

<div id="menu" class="chat-menu" onclick="toggleEmployeeList()">☰</div>

<div class="chat-profile">
<!--  <img th:src="@{/images/profile.png}" alt="Profile"/>-->
  <div>
<!--    <div th:text="${employee.name}">Employee Name</div>-->
<!--    <div th:text="${employee.department}">Department</div>-->
<!--  </div>-->
</div>

<div class="chat-chatRoomList">
  <ul>
<!--    <li th:each="chatRoom : ${chatRooms}">-->
<!--      <img th:src="@{${chatRoom.image}}" alt="Room Image"/>-->
      <div>
<!--        <h2 th:text="${chatRoom.name}">Chat Room Name</h2>-->
<!--        <p th:text="${chatRoom.latestMessage}">Latest message...</p>-->
<!--        <time th:text="${chatRoom.timestamp}">Timestamp</time>-->
      </div>
<!--    </li>-->
  </ul>
</div>

<script th:inline="javascript">
  /*<![CDATA[*/
  function toggleEmployeeList() {
    // Toggle the visibility of the employee list
  }
  /*]]>*/
</script>
<script>
  const socket = new SockJS('/chat');
  const stompClient = Stomp.over(socket);

  stompClient.connect({}, function(frame) {
    stompClient.subscribe('/topic/messages', function(message) {
      // 메시지 수신 시 처리
      alert(JSON.parse(message.body).content);
    });
  });

  function sendMessage() {
    stompClient.send("/app/chat/send", {}, JSON.stringify({'content': 'Hello!'}));
  }


</script>

<button onclick="sendMessage()">Send Message</button>
</div>
</body>
</html>
