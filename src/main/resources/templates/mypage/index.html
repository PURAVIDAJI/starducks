<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main}">

<th:block layout:fragment="addMore">
    <link rel="stylesheet" type="text/css" th:href="@{/css/mypage/index.css}"></link>
    <script th:src="@{/js/mypage/index.js}"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
</th:block>

<main layout:fragment="content">
    <section class="widget content" id="widgetAttend">
        <h4>근태 관리</h4>
        <div th:replace="~{hr/attend/_profile::profile}"></div>

        <!-- 출퇴근 버튼 -->
        <div>
            <form th:action="@{/mypage/attendance/startSubmit}" method="post" th:if="${attendance?.startTime == null}">
                <button class="attd-btn" type="submit" th:text="출근">출근</button>
            </form>
            <form th:action="@{/mypage/attendance/endSubmit}" method="post" th:if="${attendance?.startTime != null && attendance?.endTime == null}">
                <button class="attd-btn" type="submit" th:text="퇴근">퇴근</button>
            </form>
        </div>

        <!-- 출퇴근 기록 -->
        <div>
            <span>출근&ensp;|&ensp;</span><span type="text" th:if="${attendance != null}" th:text="${#temporals.format(attendance?.startTime, 'HH:mm')}"></span>
            <span>퇴근&ensp;|&ensp;</span><span type="text" th:if="${attendance != null}" th:text="${#temporals.format(attendance?.endTime, 'HH:mm')}"></span>
        </div>

        <hr/>
        <div>
            <h4>근태 이력</h4>
            <ul class="d-flex">
                <li>
                    <p th:text="${workDays}"></p>
                    <p>근무</p>
                </li>
                <li>
                    <p th:text="${lateDays}"></p>
                    <p>지각</p>
                </li>
                <li>
                    <p th:text="${absentDays}"></p>
                    <p>결근</p>
                </li>
                <li>
                    <p th:text="15"></p>
                    <p>연차</p>
                </li>
            </ul>
        </div>
    </section>

    <!-- 전자결재함 -->
    <section class="widget content" id="widgetDoc">
        전자결재함
    </section>

    <!-- 일정 -->
    <section class="widget content" id="widgetCal">
        <div id='calendar'></div>
        <hr/>
        <table>
            <thead>
                <tr>
                    <th>날짜</th>
                    <th>내용</th>
                </tr>
            </thead>
            <tbody th:object="">
                <tr>
                    <td th:text=""></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </section>
</main>
</html>